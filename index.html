<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>TAB Bonus Bet Calculator</title>
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
            }
            #result {
                padding-top: 20px;
            }
            .label {
                display: inline-block;
                width: 200px;
            }
        </style>
    </head>
    <body>

        <div>
            <div class="label"><label for="bonusBet">Bonus bet value: </label></div>
            <input id="bonusBet" type="text" value="10"/>
        </div>
        <div>
            <div class="label"><label for="maxBet">Maximum bet: </label></div>
            <input id="maxBet" type="text" value="20"/>
        </div>
        <div>
            <div class="label"><label for="oddsA">Odds: </label></div>
            <input id="oddsA" type="text" value="1.59"/> | 
            <input id="oddsB" type="text" value="2.31"/>
        </div>
        <div>
            <div class="label"><label for="calculate">&nbsp;</label></div>
            <button id="calculate" onclick="calculate();">Calculate</button>
        </div>

        <div id="result">
            <div>You should bet 
                <span id="dollarsToBet"></span> 
                dollars on the 
                $<span id="betOption"></span> 
                option, and put your bonus bet on the 
                $<span id="bonusOption"></span> 
                option, for a minimum gain of 
                $<span id="gain"></span>.
            </div>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                $("#result").hide();
            });

            function calculate(){
                var bet;
                var bonusBet = parseFloat($("#bonusBet").val());
                var oddsA = parseFloat($("#oddsA").val());
                var oddsB = parseFloat($("#oddsB").val());
                var maxBet = parseFloat($("#maxBet").val());

                var mins = {};

                var minAB;
                var minBA;
                var max = 0;
                var dollarsToBet = 0;
                var option = 0;
                var gain = 0;

                for (bet = maxBet; bet > 0; bet--) {
                    minAB = +Math.min((oddsA*bet)-bet, ((oddsB*bonusBet)-bonusBet)-bet).toFixed(2);
                    minBA = +Math.min((oddsB*bet)-bet, ((oddsA*bonusBet)-bonusBet)-bet).toFixed(2);
                    
                    var currentMax = Math.max(minAB, minBA);

                    if (currentMax > max) {
                        
                        $("#dollarsToBet").html(bet);

                        if (minAB > minBA) {
                            $("#betOption").html(oddsA);
                            $("#bonusOption").html(oddsB);
                            $("#gain").html(minAB);
                        } else {
                            $("#betOption").html(oddsB);
                            $("#bonusOption").html(oddsA);
                            $("#gain").html(minBA);
                        }
                    }

                    max = Math.max(max, currentMax);
                }

                $("#result").show();
            }
        </script>
    </body>
</html>